<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div class="div" id="div" style="width:20px;height: 20px;background: red;position: absolute;left:20px;">
        
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
    var isClick=true;
    var ofLeftAfter;
    var ofTopAfter;
    var ofLeft;
    var ofTop;
    var sum;
    var isMove;
        $('.div').each(function(index){
        $(this).on('touchstart', function(evt) {
            ofLeft = $(this).position().left;
            ofTop = $(this).position().top;
            var e = event || evt;
            e.preventDefault();//阻止其他事件
            isClick=true;
            isMove=false;
        }).on('touchmove', function(evt) {
            
            var e = event || evt;
            e.preventDefault();//阻止其他事件
            // 如果这个元素的位置内只有一个手指的话
            //console.log(e.targetTouches)
            if (e.targetTouches.length == 1) {
                var touch = e.targetTouches[0];  // 把元素放在手指所在的位置
                var ofLeftAfter = $(this).position().left;
                var ofTopAfter = $(this).position().top;
                var absLeft = ofLeft-ofLeftAfter;
                var absTop = ofTop-ofTopAfter;
                sum = Math.sqrt(absLeft*absLeft+absTop*absTop);
                $(this).css("left",(touch.pageX- parseInt($(this).width())/2 + 'px'));
                $(this).css("top",(touch.pageY- parseInt($(this).height())/2 + 'px'));
                isMove=true;
            }
        }).on('touchend', function(evt) {
            if(isMove==true){
                (sum <=3 && 0<=sum)?isClick=true:isClick=false;
                }else{}
            var e = event || evt;
            e.preventDefault();//阻止其他事件
            if(isClick==true){
            window.location.href='/h5/teacher/release_wish.html';
            }
        })
    });
</script>
</html>